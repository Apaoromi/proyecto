<!DOCTYPE html>
<html lang="es">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>eMercado - Todo lo que busques está aquí</title>

  <link href="https://fonts.googleapis.com/css?family=Raleway:300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
  <link href="css/font-awesome.min.css" rel="stylesheet">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>eMercado - Todo lo que busques está aquí</title>



<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark p-1">
<div class="container">
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarNav">
<ul class="navbar-nav w-100 justify-content-between">
<li class="nav-item">
<a class="nav-link" href="index.html">Inicio</a>
</li>
<li class="nav-item">
<a class="nav-link" href="categories.html">Categorías</a>
</li>
<li class="nav-item">
<a class="nav-link" href="sell.html">Vender</a>
</li>
<li class="nav-item">
<a class="nav-link" id="link-usuario" href="login.html">Registrarse</a>
</li>
<!-- modo c/o  -->
<li class="nav-item">
            <div class="theme-toggle" id="themeToggle">
              <span class="toggle-label">Modo Oscuro</span>
              <div class="toggle-switch"></div>
            </div>

</li>
</ul>
</div>
</div>
</nav>
<main>
<div class="container">
<div id="container-info"></div>
<!-- Contenedor donde aparecerán las alertas -->
<div id="alertPlaceholder" class="position-fixed top-0 end-0 p-3" style="z-index: 1050;"></div>

<!-- Tu botón -->
<button id="btnCarrito" class="btn btn-primary">Agregar al carrito</button>

</div>
<div class="container">
<div class="product-rating"> <h3>Califica este producto</h3> 
<form id="ratingForm"> 
<div class="rating-stars"> 
<input type="radio" name="stars" id="star5" value="5">
<label for="star5">★</label> 
<input type="radio" name="stars" id="star4" value="4"><label for="star4">★</label> 
<input type="radio" name="stars" id="star3" value="3"><label for="star3">★</label>
<input type="radio" name="stars" id="star2" value="2"><label for="star2">★</label>
<input type="radio" name="stars" id="star1" value="1"><label for="star1">★</label>
</div> 
<textarea id="comentario-text" name="comentario" placeholder="Escribe tu comentario..."></textarea> 
<button id="btn-comentario" type="submit">Enviar</button>
</form> 
</div>

<hr>

<h3 id="coment">Comentarios</h3>

<div id="ordenar-comentarios">
<label for="orden">Ordenar por: </label>
<select id="orden">
<option value="fecha_desc">Fecha (más recientes primero)</option>
<option value="fecha_asc">Fecha (más antiguos primero)</option>
<option value="puntuacion_desc">Puntuación (mayor a menor)</option>
<option value="puntuacion_asc">Puntuación (menor a mayor)</option>
</select>
</div>
<div id="lista-comentarios"></div>
</div>

<hr>

<section class="container my-5">
<h2>Productos Relacionados</h2>
<div class="row" id="productos-relacionados-container">
</div>
</section>
</main>
<footer class="text-muted">
<div class="container-info">
<p class="float-end">
<a href="#">Volver arriba</a>
</p>
<p>Este sitio forma parte de <a href="https://jovenesaprogramar.edu.uy/" target="_blank">Jovenes a Programar</a></p>
</div>
</footer>
<div id="spinner-wrapper">
<div class="lds-ring">
<div></div>
<div></div>
<div></div>
<div></div>
</div>
</div>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/init.js"></script>
<script src="js/product-info.js"></script>
<script src="navbar.js"></script>
<script>
const selectOrden = document.getElementById("orden");
const lista = document.getElementById("lista-comentarios");

selectOrden.addEventListener("change", () => {
let comentarios = Array.from(lista.children);

comentarios.sort((a, b) => {
let fechaA = new Date(a.getAttribute("data-fecha"));
let fechaB = new Date(b.getAttribute("data-fecha"));
let puntA = parseInt(a.getAttribute("data-puntuacion"));
let puntB = parseInt(b.getAttribute("data-puntuacion"));

switch (selectOrden.value) {
case "fecha_desc":
return fechaB - fechaA;
case "fecha_asc":
return fechaA - fechaB;
case "puntuacion_desc":
return puntB - puntA;
case "puntuacion_asc":
return puntA - puntB;
}
});

// Reinsertar comentarios ordenados
lista.innerHTML = "";
comentarios.forEach(c => lista.appendChild(c));
});
</script>
<script>
// Función para cambiar entre modo claro y oscuro
function toggleTheme() {
    document.body.classList.toggle('dark-mode');
    
    // Guardar preferencia en localStorage
    const isDarkMode = document.body.classList.contains('dark-mode');
    localStorage.setItem('darkMode', isDarkMode);
    
    // Actualizar texto del toggle
    const toggleLabel = document.querySelector('.toggle-label');
    toggleLabel.textContent = isDarkMode ? 'Modo Claro' : 'Modo Oscuro';
}

// Cargar preferencia de tema al iniciar
function loadTheme() {
    const darkMode = localStorage.getItem('darkMode') === 'true';
    
    if (darkMode) {
        document.body.classList.add('dark-mode');
        document.querySelector('.toggle-label').textContent = 'Modo Claro';
    }
    // Si no hay preferencia guardada, se queda en modo claro (predeterminado)
}

// Inicializar cuando el DOM esté listo
document.addEventListener('DOMContentLoaded', function() {
    loadTheme();
    
    // Configurar el toggle del tema
    document.getElementById('themeToggle').addEventListener('click', toggleTheme);
});
</script>

</body>
</html>